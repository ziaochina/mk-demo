webpackJsonp([20],{1881:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o,i=n(2),c=a(i),u=n(55),s=a(u),d=n(5),l=a(d),f=n(10),p=a(f),m=n(8),h=a(m),g=n(9),A=a(g),v=n(0),w=(a(v),n(253)),y=n(702),x=a(y),b=(r=(0,w.wrapper)(x.default))(o=function(e){function t(){return(0,l.default)(this,t),(0,h.default)(this,(t.__proto__||(0,s.default)(t)).apply(this,arguments))}return(0,A.default)(t,e),(0,p.default)(t,[{key:"render",value:function(){return this.props.monkeyKing((0,c.default)({},this.props,{path:"root"}))}}]),t}(v.Component))||o;t.default=b,e.exports=t.default},1882:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e){var t=new m.action(e),n=new v((0,i.default)({},e,{metaAction:t})),a=(0,i.default)({},t,n);return t.config({metaHandlers:a}),a}Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),i=a(o),c=n(568),u=a(c),s=n(569),d=a(s),l=n(5),f=a(l);t.default=r;var p=n(0),m=(a(p),n(253)),h=(n(72),n(614)),g=a(h),A=n(6),v=(a(A),function e(t){var n=this;(0,f.default)(this,e),this.onInit=function(e){var t=e.component,a=e.injections;n.component=t,n.injections=a,a.reduce("init");var r=n.metaAction.gf("data.pagination").toJS();n.load(r)},this.load=function(){var e=(0,d.default)(u.default.mark(function e(t){var a,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{type:1};return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.webapi.goods.init({pagination:t,filter:r});case 2:a=e.sent,a.filter=r,n.injections.reduce("load",a);case 5:case"end":return e.stop()}},e,n)}));return function(t){return e.apply(this,arguments)}}(),this.reload=(0,d.default)(u.default.mark(function e(){var t,a;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=n.metaAction.gf("data.pagination").toJS(),a=n.metaAction.gf("data.filter").toJS(),n.load(t,a);case 3:case"end":return e.stop()}},e,n)})),this.getListRowsCount=function(){return n.metaAction.gf("data.list").size},this.isSelectAll=function(){var e=n.metaAction.gf("data.list");return!(!e||0==e.size)&&e.every(function(e){return e.get("selected")})},this.selectAll=function(e){n.injections.reduce("selectAll",e.target.checked)},this.pageChanged=function(e,t){var a=n.metaAction.gf("data.filter").toJS();n.load({current:e,pageSize:t},a)},this.selectType=function(e,t){var a={current:1,total:0,pageSize:20},r={type:e[0]};n.load(a,r)},this.loopTreeChildrenInternal=function(e){return e?e.map(function(e){return e.children&&e.children.length?{name:e.id,component:"Tree.TreeNode",key:e.id,title:e.name,children:n.loopTreeChildrenInternal(e.children)}:{name:e.id,component:"Tree.TreeNode",key:e.id,title:e.name}}):null},this.loopTreeChildren=function(e){return{_isMeta:!0,value:n.loopTreeChildrenInternal(e)}},this.addType=(0,d.default)(u.default.mark(function e(){var t,a;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.metaAction.gf("data.filter.type")){e.next=4;break}return n.metaAction.toast("error","请选中一个分类"),e.abrupt("return");case 4:return e.next=6,n.metaAction.modal("show",{title:"新增",children:n.metaAction.loadApp("mk-app-tree-table-type",{store:n.component.props.store,parentId:t})});case 6:a=e.sent,a&&n.reload();case 8:case"end":return e.stop()}},e,n)})),this.modifyType=(0,d.default)(u.default.mark(function e(){var t,a;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.metaAction.gf("data.filter.type")){e.next=4;break}return n.metaAction.toast("error","请选中一个分类"),e.abrupt("return");case 4:return e.next=6,n.metaAction.modal("show",{title:"修改",children:n.metaAction.loadApp("mk-app-tree-table-type",{store:n.component.props.store,typeId:t})});case 6:a=e.sent,a&&n.reload();case 8:case"end":return e.stop()}},e,n)})),this.delType=(0,d.default)(u.default.mark(function e(){var t,a,r,o,i;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.metaAction.gf("data.filter.type")){e.next=4;break}return n.metaAction.toast("error","请选中一个分类"),e.abrupt("return");case 4:return e.next=6,n.metaAction.modal("confirm",{title:"删除",content:"确认删除?"});case 6:if(!(a=e.sent)){e.next=15;break}return r=n.metaAction.gf("data.filter.type"),e.next=11,n.webapi.goodsType.del({id:r});case 11:o=e.sent,n.metaAction.toast("success","删除类型成功"),i=n.metaAction.gf("data.pagination").toJS(),n.load(i,{type:-1});case 15:case"end":return e.stop()}},e,n)})),this.addDetail=(0,d.default)(u.default.mark(function e(){var t,a;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.metaAction.gf("data.filter.type")){e.next=4;break}return n.metaAction.toast("error","请选中一个分类"),e.abrupt("return");case 4:return e.next=6,n.metaAction.modal("show",{title:"新增",children:n.metaAction.loadApp("mk-app-tree-table-detail",{store:n.component.props.store,typeId:t})});case 6:a=e.sent,a&&n.reload();case 8:case"end":return e.stop()}},e,n)})),this.modifyDetail=function(e){return(0,d.default)(u.default.mark(function t(){var a;return u.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.metaAction.modal("show",{title:"修改",children:n.metaAction.loadApp("mk-app-tree-table-detail",{store:n.component.props.store,id:e})});case 2:a=t.sent,a&&n.reload();case 4:case"end":return t.stop()}},t,n)}))},this.batchDelDetail=(0,d.default)(u.default.mark(function e(){var t,a,r,o;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.metaAction.gf("data.list"),t&&0!=t.size||n.metaAction.toast("error","请选中要删除的商品"),a=t.filter(function(e){return e.get("selected")}),a&&0!=a.size||n.metaAction.toast("error","请选中要删除的商品"),e.next=6,n.metaAction.modal("confirm",{title:"删除",content:"确认删除?"});case 6:if(r=e.sent){e.next=9;break}return e.abrupt("return");case 9:return o=a.map(function(e){return e.get("id")}).toJS(),e.next=12,n.webapi.goods.del({ids:o});case 12:n.metaAction.toast("success","删除成功"),n.reload();case 14:case"end":return e.stop()}},e,n)})),this.metaAction=t.metaAction,this.config=g.default.current,this.webapi=this.config.webapi});e.exports=t.default},1883:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e){var t=new d.reducer(e),n=new p((0,i.default)({},e,{metaReducer:t}));return(0,i.default)({},t,n)}Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),i=a(o),c=n(5),u=a(c);t.default=r;var s=n(72),d=n(253),l=n(614),f=(a(l),n(703)),p=function e(t){var n=this;(0,u.default)(this,e),this.init=function(e,t){return n.metaReducer.init(e,(0,f.getInitState)())},this.load=function(e,t){return e=n.metaReducer.sf(e,"data.list",(0,s.fromJS)(t.list)),e=n.metaReducer.sf(e,"data.pagination",(0,s.fromJS)(t.pagination)),e=n.metaReducer.sf(e,"data.filter",(0,s.fromJS)(t.filter)),t.goodsTypes&&(e=n.metaReducer.sf(e,"data.other.goodsTypes",(0,s.fromJS)(t.goodsTypes))),e},this.selectAll=function(e,t){var a=n.metaReducer.gf(e,"data.list");if(!a||0==a.size)return e;for(var r=0;r<a.size;r++)e=n.metaReducer.sf(e,"data.list."+r+".selected",t);return e},this.metaReducer=t.metaReducer};e.exports=t.default}});