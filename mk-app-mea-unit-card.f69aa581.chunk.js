webpackJsonp([37],{1806:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,u,c=r(2),s=n(c),i=r(46),o=n(i),f=r(5),d=n(f),p=r(10),l=n(p),h=r(8),m=n(h),v=r(9),k=n(v),x=r(0),b=(n(x),r(253)),w=r(654),_=n(w),y=(a=(0,b.wrapper)(_.default))(u=function(e){function t(){return(0,d.default)(this,t),(0,m.default)(this,(t.__proto__||(0,o.default)(t)).apply(this,arguments))}return(0,k.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){return this.props.monkeyKing((0,s.default)({},this.props,{path:"root"}))}}]),t}(x.Component))||u;t.default=y,e.exports=t.default},1807:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e){var t=new x.action(e),r=new y((0,i.default)({},e,{metaAction:t})),n=(0,i.default)({},t,r);return t.config({metaHandlers:n}),n}Object.defineProperty(t,"__esModule",{value:!0});var u=r(15),c=n(u),s=r(2),i=n(s),o=r(52),f=n(o),d=r(573),p=n(d),l=r(574),h=n(l),m=r(5),v=n(m);t.default=a;var k=r(0),x=(n(k),r(253)),b=(r(72),r(7)),w=(n(b),r(592)),_=n(w),y=function e(t){var r=this;(0,v.default)(this,e),this.onInit=function(e){var t=e.component,n=e.injections;r.component=t,r.injections=n,r.component.props.setOkListener&&r.component.props.setOkListener(r.onOk),r.component.props.typeId?(n.reduce("init"),r.load()):n.reduce("init")},this.load=(0,h.default)(p.default.mark(function e(){var t;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.webapi.meaUnit.findById(r.component.props.typeId);case 2:t=e.sent,r.injections.reduce("load",t);case 4:case"end":return e.stop()}},e,r)})),this.onOk=(0,h.default)(p.default.mark(function e(){return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.save();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,r)})),this.save=(0,h.default)(p.default.mark(function e(){var t,n,a,u;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.metaAction.gf("data.form").toJS(),e.next=3,r.check([{path:"data.form.name",value:t.name}]);case 3:if(n=e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:if(!t.id){e.next=14;break}return e.next=9,r.webapi.meaUnit.update(t);case 9:return a=e.sent,r.metaAction.toast("success","修改成功"),e.abrupt("return",a);case 14:return e.next=16,r.webapi.meaUnit.create(t);case 16:return u=e.sent,r.metaAction.toast("success","新增成功"),e.abrupt("return",u);case 19:case"end":return e.stop()}},e,r)})),this.fieldChange=function(){var e=(0,h.default)(p.default.mark(function e(t,n){return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.check([{path:t,value:n}]);case 2:case"end":return e.stop()}},e,r)}));return function(t,r){return e.apply(this,arguments)}}(),this.check=function(){var e=(0,h.default)(p.default.mark(function e(t){var n,a,u,s,o,d,l,h,m,v;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:n=[],a=!0,u=!1,s=void 0,e.prev=6,o=(0,f.default)(t);case 8:if(a=(d=o.next()).done){e.next=22;break}if(l=d.value,h=(0,i.default)({},l),"data.form.name"!=l.path){e.next=18;break}return e.t0=c.default,e.t1=h,e.next=16,r.checkName(l.value);case 16:e.t2=e.sent,(0,e.t0)(e.t1,e.t2);case 18:n.push(h);case 19:a=!0,e.next=8;break;case 22:e.next=28;break;case 24:e.prev=24,e.t3=e.catch(6),u=!0,s=e.t3;case 28:e.prev=28,e.prev=29,!a&&o.return&&o.return();case 31:if(e.prev=31,!u){e.next=34;break}throw s;case 34:return e.finish(31);case 35:return e.finish(28);case 36:return m={},v=!0,n.forEach(function(e){m[e.path]=e.value,m[e.errorPath]=e.message,e.message&&(v=!1)}),r.metaAction.sfs(m),e.abrupt("return",v);case 41:case"end":return e.stop()}},e,r,[[6,24,28,36],[29,,31,35]])}));return function(t){return e.apply(this,arguments)}}(),this.checkName=function(){var e=(0,h.default)(p.default.mark(function e(t){var n;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t||(n="请录入名称"),e.abrupt("return",{errorPath:"data.other.error.name",message:n});case 2:case"end":return e.stop()}},e,r)}));return function(t){return e.apply(this,arguments)}}(),this.metaAction=t.metaAction,this.config=_.default.current,this.webapi=this.config.webapi};e.exports=t.default},1808:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e){var t=new f.reducer(e),r=new h((0,c.default)({},e,{metaReducer:t}));return(0,c.default)({},t,r)}Object.defineProperty(t,"__esModule",{value:!0});var u=r(2),c=n(u),s=r(5),i=n(s);t.default=a;var o=r(72),f=r(253),d=r(592),p=(n(d),r(7)),l=(n(p),r(655)),h=function e(t){var r=this;(0,i.default)(this,e),this.init=function(e,t){var n=(0,l.getInitState)();return r.metaReducer.init(e,n)},this.load=function(e,t){return r.metaReducer.sf(e,"data.form",(0,o.fromJS)(t))},this.metaReducer=t.metaReducer};e.exports=t.default}});