webpackJsonp([11],{1933:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,u,o=n(2),c=r(o),i=n(46),s=r(i),f=n(5),d=r(f),p=n(10),l=r(p),h=n(8),m=r(h),v=n(9),x=r(v),k=n(0),b=(r(k),n(254)),_=n(720),w=r(_),A=(a=(0,b.wrapper)(w.default))(u=function(e){function t(){return(0,d.default)(this,t),(0,m.default)(this,(t.__proto__||(0,s.default)(t)).apply(this,arguments))}return(0,x.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){return this.props.monkeyKing((0,c.default)({},this.props,{path:"root"}))}}]),t}(k.Component))||u;t.default=A,e.exports=t.default},1934:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){var t=new x.action(e),n=A.default.actionCreator((0,s.default)({},e,{metaAction:t})),r=new y((0,s.default)({},e,{metaAction:t,extendAction:n})),a=(0,s.default)({},t,n.formAction,r);return t.config({metaHandlers:a}),a}Object.defineProperty(t,"__esModule",{value:!0});var u,o,c,i=n(2),s=r(i),f=n(570),d=r(f),p=n(571),l=r(p),h=n(5),m=r(h);t.default=a;var v=n(0),x=(r(v),n(254)),k=(n(72),n(6)),b=(r(k),n(620)),_=r(b),w=n(2078),A=r(w),y=(o=u=function e(t){(0,m.default)(this,e),c.call(this),this.metaAction=t.metaAction,this.extendAction=t.extendAction,this.config=_.default.current,this.webapi=this.config.webapi},c=function(){var e=this;this.onInit=function(t){var n=t.component,r=t.injections;e.extendAction.formAction.onInit({component:n,injections:r}),e.component=n,e.injections=r,e.component.props.setOkListener&&e.component.props.setOkListener(e.onOk),e.component.props.typeId?(r.reduce("init"),e.load()):r.reduce("init",{parentId:e.component.props.parentId})},this.load=(0,l.default)(d.default.mark(function t(){var n;return d.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.webapi.stockType.findById(e.component.props.typeId);case 2:n=t.sent,e.injections.reduce("load",n);case 4:case"end":return t.stop()}},t,e)})),this.onOk=(0,l.default)(d.default.mark(function t(){return d.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.save();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t,e)})),this.check=function(){var t=(0,l.default)(d.default.mark(function t(n){return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n&&n.path){e.next=2;break}return e.abrupt("return");case 2:if("data.form.code"!=n.path){e.next=6;break}return e.abrupt("return",{errorPath:"data.other.error.code",message:n.value?"":"请录入编码"});case 6:if("data.form.name"!=n.path){e.next=8;break}return e.abrupt("return",{errorPath:"data.other.error.name",message:n.value?"":"请录入名称"});case 8:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.save=(0,l.default)(d.default.mark(function t(){var n,r,a,u;return d.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.metaAction.gf("data.form").toJS(),t.next=3,e.extendAction.formAction.check([{path:"data.form.name",value:n.name},{path:"data.form.code",value:n.code}],e.check);case 3:if(r=t.sent){t.next=6;break}return t.abrupt("return",!1);case 6:if(!n.id){t.next=14;break}return t.next=9,e.webapi.stockType.update(n);case 9:return a=t.sent,e.metaAction.toast("success","修改成功"),t.abrupt("return",a);case 14:return t.next=16,e.webapi.stockType.create(n);case 16:return u=t.sent,e.metaAction.toast("success","新增成功"),t.abrupt("return",u);case 19:case"end":return t.stop()}},t,e)})),this.fieldChange=function(t,n){e.extendAction.formAction.fieldChange(t,n,e.check)}},o);e.exports=t.default},1935:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){var t=new l.reducer(e),n=new x((0,s.default)({},e,{metaReducer:t}));return(0,s.default)({},t,n)}Object.defineProperty(t,"__esModule",{value:!0});var u,o,c,i=n(2),s=r(i),f=n(5),d=r(f);t.default=a;var p=n(72),l=n(254),h=n(620),m=(r(h),n(6)),v=(r(m),n(721)),x=(o=u=function e(t){(0,d.default)(this,e),c.call(this),this.metaReducer=t.metaReducer},c=function(){var e=this;this.init=function(t,n){var r=(0,v.getInitState)();return n&&n.parentId&&(r.data.form.parentId=n.parentId),e.metaReducer.init(t,r)},this.load=function(t,n){return e.metaReducer.sf(t,"data.form",(0,p.fromJS)(n))}},o);e.exports=t.default},2056:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2057),a=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default={action:a.default},e.exports=t.default},2057:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(52),u=r(a),o=n(570),c=r(o),i=n(571),s=r(i),f=n(5),d=r(f),p=n(11),l=r(p),h=n(14),m=(r(h),function e(t){(0,d.default)(this,e),v.call(this),this.metaAction=t.metaAction}),v=function(){var e=this;this.onInit=function(t){var n=t.component,r=t.injections;e.component=n,e.injections=r},this.fieldChange=function(){var t=(0,s.default)(c.default.mark(function t(n,r,a){return c.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.check([{path:n,value:r}],a,!0);case 2:case"end":return t.stop()}},t,e)}));return function(e,n,r){return t.apply(this,arguments)}}(),this.check=function(){var t=(0,s.default)(c.default.mark(function t(n,r,a){var o,i,s,f,d,p,h,m,v,x;return c.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n&&l.default._.isArray(n)){t.next=2;break}return t.abrupt("return");case 2:o=[],i=!0,s=!1,f=void 0,t.prev=6,d=(0,u.default)(n);case 8:if(i=(p=d.next()).done){t.next=19;break}if(h=p.value,m=void 0,!r){t.next=15;break}return t.next=14,r({path:h.path,value:h.value});case 14:m=t.sent;case 15:m&&o.push(m);case 16:i=!0,t.next=8;break;case 19:t.next=25;break;case 21:t.prev=21,t.t0=t.catch(6),s=!0,f=t.t0;case 25:t.prev=25,t.prev=26,!i&&d.return&&d.return();case 28:if(t.prev=28,!s){t.next=31;break}throw f;case 31:return t.finish(28);case 32:return t.finish(25);case 33:return v=!1,x={},a&&n.forEach(function(e){x[e.path]=e.value}),o.length>0&&o.forEach(function(e){x[e.errorPath]=e.message,e.message&&(v=!0)}),x&&e.metaAction.sfs(x),t.abrupt("return",!v);case 38:case"end":return t.stop()}},t,e,[[6,21,25,33],[26,,28,32]])}));return function(e,n,r){return t.apply(this,arguments)}}()};t.default=m,e.exports=t.default},2078:function(e,t,n){"use strict";function r(e){return{formAction:new u.default.action(e)}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(2056),u=function(e){return e&&e.__esModule?e:{default:e}}(a);t.default={actionCreator:r},e.exports=t.default}});